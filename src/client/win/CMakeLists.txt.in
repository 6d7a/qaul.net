cmake_minimum_required (VERSION 2.8.11)

project (qaul)

# define paths
set(LIBQAUL_SRC @CMAKE_SOURCE_DIR@/src/libqaul)
set(LIBQAUL_LINK @CMAKE_BINARY_DIR@/src/libqaul)
set(QAULWIN_SRC @CMAKE_SOURCE_DIR@/src/client/win/src)

# set /clr flag for compiler
STRING(REPLACE "/EHsc" "/EHa" CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS})
STRING(REPLACE "/RTC1" "" CMAKE_CXX_FLAGS_DEBUG ${CMAKE_CXX_FLAGS_DEBUG})
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /clr")

# set properties and flags
add_definitions(-DUNICODE -D_UNICODE)
set_property(GLOBAL PROPERTY USE_FOLDERS ON)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /W4")
message("cxx Flags: " ${CMAKE_CXX_FLAGS})

# path to liblibqaul.dll.a directory
link_directories(${LIBQAUL_LINK})

# add source files
file(GLOB QAULTARGET_FILES
	"${QAULWIN_SRC}/*.cpp"
	"${QAULWIN_SRC}/*.h"
)

# add target
add_executable(qaul 
	\${QAULTARGET_FILES}
)
set_property(TARGET qaul PROPERTY VS_DOTNET_REFERENCES 
	"System"
	"System.Windows.Forms"
	"System.data"
	"System.Drawing"
)
set_property(TARGET qaul PROPERTY LINK_FLAGS 
	"/FORCE:MULTIPLE"
)
target_include_directories(qaul PRIVATE
	${LIBQAUL_SRC}/include
)
target_link_libraries(qaul
)


install(TARGETS qaul DESTINATION bin)
